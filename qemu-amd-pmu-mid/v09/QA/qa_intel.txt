------------

Intel, 6.13, host.

pmu is enabled
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin

[    0.244644] Performance Events: PEBS fmt0-, Icelake events, full-width counters, Intel PMU driver.

------------

Intel, 6.13, host,-pmu.

pmu is disabled
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0

[root@vm ~]# dmesg | grep Perf
[    0.246374] Performance Events: unsupported p6 CPU model 106 no PMU driver, software events only.
[    0.248591] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13, EPYC.

pmu is disabled
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0

[root@vm ~]# dmesg | grep Perf
[    0.325248] Performance Events: no PMU driver, software events only.
[    0.328386] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13, EPYC,+pmu.

pmu is enabled
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].EDX.mmxext [bit 22]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].EDX.fxsr-opt [bit 25]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.cr8legacy [bit 4]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.sse4a [bit 6]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.misalignsse [bit 7]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.osvw [bit 9]
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].EDX.mmxext [bit 22]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].EDX.fxsr-opt [bit 25]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.cr8legacy [bit 4]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.sse4a [bit 6]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.misalignsse [bit 7]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.osvw [bit 9]
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].EDX.mmxext [bit 22]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].EDX.fxsr-opt [bit 25]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.cr8legacy [bit 4]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.sse4a [bit 6]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.misalignsse [bit 7]
qemu-system-x86_64: warning: host doesn't support requested feature: CPUID[eax=80000001h].ECX.osvw [bit 9]
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=1
version=2, pmc=8, fixed=3
(qemu) kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_put_msrs() reset Intel or Zhaoxin
kvm_get_msrs() reset Intel or Zhaoxin


[root@vm ~]# dmesg | grep Perf
[    0.327005] Performance Events: generic architected perfmon, Intel PMU driver.

------------

Intel, 6.13, EPYC,-pmu.

pmu is disabled
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0
pmu_cap=1
version=0, pmc=0, fixed=0

[root@vm ~]# dmesg | grep Perf
[    0.328961] Performance Events: no PMU driver, software events only.
[    0.332167] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13 (enable_pmu=N), host.

pmu is enabled
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0

[root@vm ~]# dmesg | grep Perf
[    0.244554] Performance Events: unsupported p6 CPU model 106 no PMU driver, software events only.
[    0.246767] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13 (enable_pmu=N), host,-pmu.

pmu is disabled
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0

[root@vm ~]# dmesg | grep Perf
[    0.244035] Performance Events: unsupported p6 CPU model 106 no PMU driver, software events only.
[    0.246242] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13 (enable_pmu=N), EPYC.

pmu is disabled
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0

[root@vm ~]# dmesg | grep Perf
[    0.324739] Performance Events: no PMU driver, software events only.
[    0.327944] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13 (enable_pmu=N), EPYC,+pmu.

pmu is enabled
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0
host_vendor=GenuineIntel
vendor compatible!
pmu_cap=0
version=0, pmc=0, fixed=0

[    0.329562] Performance Events: no PMU driver, software events only.
[    0.332768] NMI watchdog: Perf NMI watchdog permanently disabled

------------

Intel, 6.13 (enable_pmu=N), EPYC,-pmu.

pmu is disabled
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0
pmu_cap=0
version=0, pmc=0, fixed=0

[    0.328030] Performance Events: no PMU driver, software events only.
[    0.331243] NMI watchdog: Perf NMI watchdog permanently disabled

------------
